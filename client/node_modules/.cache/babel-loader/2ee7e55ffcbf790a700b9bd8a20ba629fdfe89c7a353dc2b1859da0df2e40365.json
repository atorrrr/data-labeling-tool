{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{Container,Typography,TextField,Button,Box}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DatasetUpload(){const[file,setFile]=useState(null);const[datasetName,setDatasetName]=useState('');const[labelOptions,setLabelOptions]=useState('');const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();const formData=new FormData();formData.append('file',file);formData.append('datasetName',datasetName);formData.append('labelOptions',labelOptions);try{const response=await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api/items/upload\"),formData,{headers:{'Content-Type':'multipart/form-data'}});console.log('Upload response:',response.data);navigate('/');}catch(err){var _err$response,_err$response$data;console.error('Upload error:',err);if(err.response){// The request was made and the server responded with a status code\n// that falls out of the range of 2xx\nconsole.error('Error data:',err.response.data);console.error('Error status:',err.response.status);console.error('Error headers:',err.response.headers);}else if(err.request){// The request was made but no response was received\nconsole.error('Error request:',err.request);}else{// Something happened in setting up the request that triggered an Error\nconsole.error('Error message:',err.message);}alert('Upload failed: '+(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.msg)||err.message));}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"Upload Dataset\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,noValidate:true,sx:{mt:1},children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"datasetName\",label:\"Dataset Name\",name:\"datasetName\",autoFocus:true,value:datasetName,onChange:e=>setDatasetName(e.target.value)}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"labelOptions\",label:\"Label Options (comma-separated)\",name:\"labelOptions\",value:labelOptions,onChange:e=>setLabelOptions(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{accept:\"application/json\",style:{display:'none'},id:\"raised-button-file\",type:\"file\",onChange:e=>setFile(e.target.files[0])}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"raised-button-file\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",component:\"span\",fullWidth:true,sx:{mt:2,mb:2},children:\"Choose JSON File\"})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},children:\"Upload\"})]})]});}export default DatasetUpload;","map":{"version":3,"names":["React","useState","useNavigate","axios","Container","Typography","TextField","Button","Box","jsx","_jsx","jsxs","_jsxs","DatasetUpload","file","setFile","datasetName","setDatasetName","labelOptions","setLabelOptions","navigate","handleSubmit","e","preventDefault","formData","FormData","append","response","post","concat","process","env","REACT_APP_API_URL","headers","console","log","data","err","_err$response","_err$response$data","error","status","request","message","alert","msg","maxWidth","children","variant","component","gutterBottom","onSubmit","noValidate","sx","mt","margin","required","fullWidth","id","label","name","autoFocus","value","onChange","target","accept","style","display","type","files","htmlFor","mb"],"sources":["/home/ec2-user/labeling-tool/client/src/pages/DatasetUpload.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { Container, Typography, TextField, Button, Box } from '@mui/material';\r\n\r\nfunction DatasetUpload() {\r\n  const [file, setFile] = useState(null);\r\n  const [datasetName, setDatasetName] = useState('');\r\n  const [labelOptions, setLabelOptions] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('datasetName', datasetName);\r\n    formData.append('labelOptions', labelOptions);\r\n\r\n\r\n\r\n  try {\r\n    const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/items/upload`, formData, {\r\n      headers: { 'Content-Type': 'multipart/form-data' }\r\n    });\r\n    console.log('Upload response:', response.data);\r\n    navigate('/');\r\n  } catch (err) {\r\n    console.error('Upload error:', err);\r\n    if (err.response) {\r\n      // The request was made and the server responded with a status code\r\n      // that falls out of the range of 2xx\r\n      console.error('Error data:', err.response.data);\r\n      console.error('Error status:', err.response.status);\r\n      console.error('Error headers:', err.response.headers);\r\n    } else if (err.request) {\r\n      // The request was made but no response was received\r\n      console.error('Error request:', err.request);\r\n    } else {\r\n      // Something happened in setting up the request that triggered an Error\r\n      console.error('Error message:', err.message);\r\n    }\r\n    alert('Upload failed: ' + (err.response?.data?.msg || err.message));\r\n  }\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\">\r\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n        Upload Dataset\r\n      </Typography>\r\n      <Box component=\"form\" onSubmit={handleSubmit} noValidate sx={{ mt: 1 }}>\r\n        <TextField\r\n          margin=\"normal\"\r\n          required\r\n          fullWidth\r\n          id=\"datasetName\"\r\n          label=\"Dataset Name\"\r\n          name=\"datasetName\"\r\n          autoFocus\r\n          value={datasetName}\r\n          onChange={(e) => setDatasetName(e.target.value)}\r\n        />\r\n        <TextField\r\n          margin=\"normal\"\r\n          required\r\n          fullWidth\r\n          id=\"labelOptions\"\r\n          label=\"Label Options (comma-separated)\"\r\n          name=\"labelOptions\"\r\n          value={labelOptions}\r\n          onChange={(e) => setLabelOptions(e.target.value)}\r\n        />\r\n        <input\r\n          accept=\"application/json\"\r\n          style={{ display: 'none' }}\r\n          id=\"raised-button-file\"\r\n          type=\"file\"\r\n          onChange={(e) => setFile(e.target.files[0])}\r\n        />\r\n        <label htmlFor=\"raised-button-file\">\r\n          <Button variant=\"contained\" component=\"span\" fullWidth sx={{ mt: 2, mb: 2 }}>\r\n            Choose JSON File\r\n          </Button>\r\n        </label>\r\n        <Button\r\n          type=\"submit\"\r\n          fullWidth\r\n          variant=\"contained\"\r\n          sx={{ mt: 3, mb: 2 }}\r\n        >\r\n          Upload\r\n        </Button>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default DatasetUpload;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}