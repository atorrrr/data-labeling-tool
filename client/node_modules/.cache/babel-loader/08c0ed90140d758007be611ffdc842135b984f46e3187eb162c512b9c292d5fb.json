{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate,Link as RouterLink}from'react-router-dom';import axios from'axios';import{Container,Typography,TextField,Button,Box,Paper,LinearProgress}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LLMReviewTool(){const[currentItem,setCurrentItem]=useState(null);const[curatedOutput,setCuratedOutput]=useState('');const[progress,setProgress]=useState({total:0,reviewed:0});const{sessionId}=useParams();const navigate=useNavigate();useEffect(()=>{fetchNextItem();fetchProgress();},[sessionId]);const fetchNextItem=async()=>{try{const res=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/llm-review/next/\").concat(sessionId));if(res.data.msg==='No more items to review'){alert('Review session complete!');navigate('/');return;}setCurrentItem(res.data);setCuratedOutput(res.data.curated_output||res.data.original_output);}catch(err){console.error('Error fetching item',err);alert('Error fetching next item');}};const fetchProgress=async()=>{try{const res=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/llm-review/progress/\").concat(sessionId));setProgress(res.data);}catch(err){console.error('Error fetching progress',err);}};const submitCuratedOutput=async()=>{try{await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api/llm-review/curate\"),{inputId:currentItem.id,curatedOutput});fetchNextItem();fetchProgress();}catch(err){console.error('Error submitting curated output',err);alert('Error saving curated output');}};const navigateItem=direction=>async()=>{if(!currentItem)return;try{const res=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/llm-review/navigate/\").concat(sessionId,\"/\").concat(currentItem.id,\"/\").concat(direction));if(res.data.msg){alert(res.data.msg);return;}setCurrentItem(res.data);setCuratedOutput(res.data.curated_output||res.data.original_output);}catch(err){console.error(\"Error navigating \".concat(direction),err);alert(\"Error navigating \".concat(direction));}};if(!currentItem){return/*#__PURE__*/_jsx(Typography,{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"LLM Output Review Tool\"}),/*#__PURE__*/_jsxs(Box,{sx:{width:'100%',mb:2},children:[/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:progress.reviewed/progress.total*100}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Progress: \",progress.reviewed,\" / \",progress.total]})]}),/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:2,mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Input:\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:currentItem.input})]}),/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:2,mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Original Output:\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:currentItem.original_output})]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Curated Output:\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:6,value:curatedOutput,onChange:e=>setCuratedOutput(e.target.value)})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:navigateItem('prev'),children:\"Previous\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:submitCuratedOutput,children:\"Save and Next\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:navigateItem('next'),children:\"Next\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",component:RouterLink,to:\"/llm-review/\".concat(sessionId,\"/import\"),sx:{mt:2},children:\"Bulk Import\"})]});}export default LLMReviewTool;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","RouterLink","axios","Container","Typography","TextField","Button","Box","Paper","LinearProgress","jsx","_jsx","jsxs","_jsxs","LLMReviewTool","currentItem","setCurrentItem","curatedOutput","setCuratedOutput","progress","setProgress","total","reviewed","sessionId","navigate","fetchNextItem","fetchProgress","res","get","concat","process","env","REACT_APP_API_URL","data","msg","alert","curated_output","original_output","err","console","error","submitCuratedOutput","post","inputId","id","navigateItem","direction","children","maxWidth","variant","component","gutterBottom","sx","width","mb","value","color","elevation","p","input","fullWidth","multiline","rows","onChange","e","target","display","justifyContent","onClick","to","mt"],"sources":["/home/ec2-user/labeling-tool/client/src/pages/LLMReviewTool.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, Link as RouterLink } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { Container, Typography, TextField, Button, Box, Paper, LinearProgress } from '@mui/material';\r\n\r\nfunction LLMReviewTool() {\r\n  const [currentItem, setCurrentItem] = useState(null);\r\n  const [curatedOutput, setCuratedOutput] = useState('');\r\n  const [progress, setProgress] = useState({ total: 0, reviewed: 0 });\r\n  const { sessionId } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchNextItem();\r\n    fetchProgress();\r\n  }, [sessionId]);\r\n\r\n  const fetchNextItem = async () => {\r\n    try {\r\n      const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/llm-review/next/${sessionId}`);\r\n      if (res.data.msg === 'No more items to review') {\r\n        alert('Review session complete!');\r\n        navigate('/');\r\n        return;\r\n      }\r\n      setCurrentItem(res.data);\r\n      setCuratedOutput(res.data.curated_output || res.data.original_output);\r\n    } catch (err) {\r\n      console.error('Error fetching item', err);\r\n      alert('Error fetching next item');\r\n    }\r\n  };\r\n\r\n  const fetchProgress = async () => {\r\n    try {\r\n      const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/llm-review/progress/${sessionId}`);\r\n      setProgress(res.data);\r\n    } catch (err) {\r\n      console.error('Error fetching progress', err);\r\n    }\r\n  };\r\n\r\n  const submitCuratedOutput = async () => {\r\n    try {\r\n      await axios.post(`${process.env.REACT_APP_API_URL}/api/llm-review/curate`, {\r\n        inputId: currentItem.id,\r\n        curatedOutput\r\n      });\r\n      fetchNextItem();\r\n      fetchProgress();\r\n    } catch (err) {\r\n      console.error('Error submitting curated output', err);\r\n      alert('Error saving curated output');\r\n    }\r\n  };\r\n\r\n  const navigateItem = (direction) => async () => {\r\n    if (!currentItem) return;\r\n    try {\r\n      const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/llm-review/navigate/${sessionId}/${currentItem.id}/${direction}`);\r\n      if (res.data.msg) {\r\n        alert(res.data.msg);\r\n        return;\r\n      }\r\n      setCurrentItem(res.data);\r\n      setCuratedOutput(res.data.curated_output || res.data.original_output);\r\n    } catch (err) {\r\n      console.error(`Error navigating ${direction}`, err);\r\n      alert(`Error navigating ${direction}`);\r\n    }\r\n  };\r\n\r\n  if (!currentItem) {\r\n    return <Typography>Loading...</Typography>;\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"md\">\r\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n        LLM Output Review Tool\r\n      </Typography>\r\n      <Box sx={{ width: '100%', mb: 2 }}>\r\n        <LinearProgress variant=\"determinate\" value={(progress.reviewed / progress.total) * 100} />\r\n        <Typography variant=\"body2\" color=\"text.secondary\">\r\n          Progress: {progress.reviewed} / {progress.total}\r\n        </Typography>\r\n      </Box>\r\n      <Paper elevation={3} sx={{ p: 2, mb: 2 }}>\r\n        <Typography variant=\"h6\" gutterBottom>Input:</Typography>\r\n        <Typography variant=\"body1\">{currentItem.input}</Typography>\r\n      </Paper>\r\n      <Paper elevation={3} sx={{ p: 2, mb: 2 }}>\r\n        <Typography variant=\"h6\" gutterBottom>Original Output:</Typography>\r\n        <Typography variant=\"body1\">{currentItem.original_output}</Typography>\r\n      </Paper>\r\n      <Box sx={{ mb: 2 }}>\r\n        <Typography variant=\"h6\" gutterBottom>Curated Output:</Typography>\r\n        <TextField\r\n          fullWidth\r\n          multiline\r\n          rows={6}\r\n          value={curatedOutput}\r\n          onChange={(e) => setCuratedOutput(e.target.value)}\r\n        />\r\n      </Box>\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\r\n        <Button variant=\"outlined\" onClick={navigateItem('prev')}>\r\n          Previous\r\n        </Button>\r\n        <Button variant=\"contained\" onClick={submitCuratedOutput}>\r\n          Save and Next\r\n        </Button>\r\n        <Button variant=\"outlined\" onClick={navigateItem('next')}>\r\n          Next\r\n        </Button>\r\n      </Box>\r\n      <Button variant=\"outlined\" component={RouterLink} to={`/llm-review/${sessionId}/import`} sx={{ mt: 2 }}>\r\n        Bulk Import\r\n      </Button>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default LLMReviewTool;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}