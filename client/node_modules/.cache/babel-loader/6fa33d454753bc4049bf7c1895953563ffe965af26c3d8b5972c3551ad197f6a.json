{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import{Container,Typography,Button,Box,Paper,LinearProgress}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LabelingTool(){const[currentItem,setCurrentItem]=useState(null);const[label,setLabel]=useState('');const[progress,setProgress]=useState({total:0,labeled:0});const[labelOptions,setLabelOptions]=useState([]);const{datasetId}=useParams();const navigate=useNavigate();useEffect(()=>{fetchNextItem();fetchProgress();},[datasetId]);const fetchNextItem=async()=>{try{const res=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/items/next/\").concat(datasetId));if(res.data.msg==='No more items to label'){alert('Labeling session complete!');navigate('/');return;}setCurrentItem(res.data);setLabel(res.data.label||'');setLabelOptions(res.data.labelOptions||[]);}catch(err){console.error('Error fetching item',err);alert('Error fetching next item');}};const fetchProgress=async()=>{try{const res=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/items/progress/\").concat(datasetId));setProgress(res.data);}catch(err){console.error('Error fetching progress',err);}};const submitLabel=async()=>{if(!label){alert('Please select a label before saving.');return;}try{await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api/items/label\"),{itemId:currentItem.id,label});fetchNextItem();fetchProgress();}catch(err){console.error('Error submitting label',err);alert('Error saving label');}};const navigateItem=async direction=>{if(!currentItem)return;try{const res=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/items/navigate/\").concat(datasetId,\"/\").concat(currentItem.id,\"/\").concat(direction));if(res.data.msg){alert(res.data.msg);return;}setCurrentItem(res.data);setLabel(res.data.label||'');setLabelOptions(res.data.labelOptions||[]);}catch(err){console.error(\"Error navigating \".concat(direction),err);alert(\"Error navigating \".concat(direction));}};if(!currentItem){return/*#__PURE__*/_jsx(Typography,{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"Labeling Tool\"}),/*#__PURE__*/_jsxs(Box,{sx:{width:'100%',mb:2},children:[/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:progress.labeled/progress.total*100}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Progress: \",progress.labeled,\" / \",progress.total]})]}),/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:2,mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"pre\",sx:{whiteSpace:'pre-wrap',wordBreak:'break-word'},children:JSON.stringify(currentItem,null,2)}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Select Label:\"}),labelOptions.map(option=>/*#__PURE__*/_jsx(Button,{variant:label===option?\"contained\":\"outlined\",onClick:()=>setLabel(option),sx:{mr:1,mb:1},children:option},option))]})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>navigateItem('prev'),children:\"PREVIOUS\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:submitLabel,disabled:!label,children:\"SAVE AND NEXT\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>navigateItem('next'),children:\"NEXT\"})]})]});}export default LabelingTool;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","Container","Typography","Button","Box","Paper","LinearProgress","jsx","_jsx","jsxs","_jsxs","LabelingTool","currentItem","setCurrentItem","label","setLabel","progress","setProgress","total","labeled","labelOptions","setLabelOptions","datasetId","navigate","fetchNextItem","fetchProgress","res","get","concat","process","env","REACT_APP_API_URL","data","msg","alert","err","console","error","submitLabel","post","itemId","id","navigateItem","direction","children","maxWidth","variant","component","gutterBottom","sx","width","mb","value","color","elevation","p","whiteSpace","wordBreak","JSON","stringify","mt","map","option","onClick","mr","display","justifyContent","disabled"],"sources":["/home/ec2-user/labeling-tool/client/src/pages/LabelingTool.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { Container, Typography, Button, Box, Paper, LinearProgress } from '@mui/material';\r\n\r\nfunction LabelingTool() {\r\n  const [currentItem, setCurrentItem] = useState(null);\r\n  const [label, setLabel] = useState('');\r\n  const [progress, setProgress] = useState({ total: 0, labeled: 0 });\r\n  const [labelOptions, setLabelOptions] = useState([]);\r\n  const { datasetId } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchNextItem();\r\n    fetchProgress();\r\n  }, [datasetId]);\r\n\r\n  const fetchNextItem = async () => {\r\n    try {\r\n      const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/items/next/${datasetId}`);\r\n      if (res.data.msg === 'No more items to label') {\r\n        alert('Labeling session complete!');\r\n        navigate('/');\r\n        return;\r\n      }\r\n      setCurrentItem(res.data);\r\n      setLabel(res.data.label || '');\r\n      setLabelOptions(res.data.labelOptions || []);\r\n    } catch (err) {\r\n      console.error('Error fetching item', err);\r\n      alert('Error fetching next item');\r\n    }\r\n  };\r\n\r\n  const fetchProgress = async () => {\r\n    try {\r\n      const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/items/progress/${datasetId}`);\r\n      setProgress(res.data);\r\n    } catch (err) {\r\n      console.error('Error fetching progress', err);\r\n    }\r\n  };\r\n\r\n  const submitLabel = async () => {\r\n    if (!label) {\r\n      alert('Please select a label before saving.');\r\n      return;\r\n    }\r\n    try {\r\n      await axios.post(`${process.env.REACT_APP_API_URL}/api/items/label`, { itemId: currentItem.id, label });\r\n      fetchNextItem();\r\n      fetchProgress();\r\n    } catch (err) {\r\n      console.error('Error submitting label', err);\r\n      alert('Error saving label');\r\n    }\r\n  };\r\n\r\n  const navigateItem = async (direction) => {\r\n    if (!currentItem) return;\r\n    try {\r\n      const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/items/navigate/${datasetId}/${currentItem.id}/${direction}`);\r\n      if (res.data.msg) {\r\n        alert(res.data.msg);\r\n        return;\r\n      }\r\n      setCurrentItem(res.data);\r\n      setLabel(res.data.label || '');\r\n      setLabelOptions(res.data.labelOptions || []);\r\n    } catch (err) {\r\n      console.error(`Error navigating ${direction}`, err);\r\n      alert(`Error navigating ${direction}`);\r\n    }\r\n  };\r\n\r\n  if (!currentItem) {\r\n    return <Typography>Loading...</Typography>;\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"md\">\r\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n        Labeling Tool\r\n      </Typography>\r\n      <Box sx={{ width: '100%', mb: 2 }}>\r\n        <LinearProgress variant=\"determinate\" value={(progress.labeled / progress.total) * 100} />\r\n        <Typography variant=\"body2\" color=\"text.secondary\">\r\n          Progress: {progress.labeled} / {progress.total}\r\n        </Typography>\r\n      </Box>\r\n      <Paper elevation={3} sx={{ p: 2, mb: 2 }}>\r\n        <Typography variant=\"body1\" component=\"pre\" sx={{ whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>\r\n          {JSON.stringify(currentItem, null, 2)}\r\n        </Typography>\r\n        <Box sx={{ mt: 2 }}>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            Select Label:\r\n          </Typography>\r\n          {labelOptions.map((option) => (\r\n            <Button\r\n              key={option}\r\n              variant={label === option ? \"contained\" : \"outlined\"}\r\n              onClick={() => setLabel(option)}\r\n              sx={{ mr: 1, mb: 1 }}\r\n            >\r\n              {option}\r\n            </Button>\r\n          ))}\r\n        </Box>\r\n      </Paper>\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\r\n        <Button variant=\"outlined\" onClick={() => navigateItem('prev')}>\r\n          PREVIOUS\r\n        </Button>\r\n        <Button variant=\"contained\" onClick={submitLabel} disabled={!label}>\r\n          SAVE AND NEXT\r\n        </Button>\r\n        <Button variant=\"outlined\" onClick={() => navigateItem('next')}>\r\n          NEXT\r\n        </Button>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default LabelingTool;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}